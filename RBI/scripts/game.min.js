function rect(n,t,i,r){return{x:n,y:t,w:i,h:r}}function rectCreated(n,t,i,r){return{x:n,y:t,w:i,h:r}}function diamond(n,t,i,r){return{x:n,y:t,w:i,h:r}}function spike(n,t,i,r){return{x:n,y:t,w:i,h:r}}function snakeEnemy(n,t,i,r){return{x:n,y:t,w:i,h:r}}function fishEnemy(n,t,i,r){return{x:n,y:t,w:i,h:r}}function setClickEvent(){$("#screen").click(function(n){for(var u=!0,f=$(this).offset().left,e=n.pageX,i=e-f,o=i-10,s=$(this).offset().top,h=n.pageY,r=h-s,c=r-10,t=0;t<res.rectsCreated.length;t++)i>res.rectsCreated[t].x&&i<res.rectsCreated[t].x+res.rectsCreated[t].w&&r>res.rectsCreated[t].y&&r<res.rectsCreated[t].y+res.rectsCreated[t].h&&(res.blockCount++,document.getElementById("blockNum").innerText=res.blockCount,u=!1,res.rectsCreated.splice(t,1));res.blockCount>0&&u&&(res.blockCount--,document.getElementById("blockNum").innerText=res.blockCount,res.rectsCreated.push(rectCreated(o,c,20,20)))})}function startGame(){document.getElementById("levelNum").innerHTML=res.level==-1?"fish":res.level,res.blockCount=res.INITIAL_BLOCKS,document.getElementById("blockNum").innerText=res.blockCount,setLevelBlocks(),res.gameComplete=!1,res.gameOver=!1,res.player=rect(20,20,26,34),res.player.velocity={x:0,y:0},res.player.onFloor=!1,res.snake!=null&&(res.snake.velocity={x:0,y:0},res.snake.velocity.x=-2,res.snake.velocity.y=1);var n=document.getElementById("left"),t=document.getElementById("right"),i=document.getElementById("jump");n.addEventListener("touchstart",function(n){left(n,!0)},!1),n.addEventListener("touchend",function(n){left(n,!1)},!1),t.addEventListener("touchstart",function(n){right(n,!0)},!1),t.addEventListener("touchend",function(n){right(n,!1)},!1),i.addEventListener("touchstart",function(n){jump(n,!0)},!1),i.addEventListener("touchend",function(n){jump(n,!1)},!1)}function startFishGame(){document.getElementById("levelNum").innerHTML=res.level==-1?"res.fish":res.level,res.blockCount=res.INITIAL_BLOCKS,document.getElementById("blockNum").innerText=res.blockCount,setFishBlocks(),res.gameComplete=!1,res.gameOver=!1,res.player=rect(20,20,26,34),res.player.velocity={x:0,y:0},res.player.onFloor=!1;var n=document.getElementById("left"),t=document.getElementById("right"),i=document.getElementById("jump");n.addEventListener("touchstart",function(n){left(n,!0)},!1),n.addEventListener("touchend",function(n){left(n,!1)},!1),t.addEventListener("touchstart",function(n){right(n,!0)},!1),t.addEventListener("touchend",function(n){right(n,!1)},!1),i.addEventListener("touchstart",function(n){jump(n,!0)},!1),i.addEventListener("touchend",function(n){jump(n,!1)},!1)}function setLevelBlocks(){var n,t,i;for(res.rects.push(rect(20,100,20,20)),res.rects.push(rect(40,100,20,20)),n=0;n<620;n+=20)res.rects.push(rect(n,0,20,20)),n>500||n<20?res.rects.push(rect(n,380,20,20)):res.spikes.push(spike(n,380,20,20));for(n=0;n<380;n+=20)res.rects.push(rect(0,n,20,20)),res.rects.push(rect(580,n,20,20));switch(res.level){default:for(n=0;n<12;n++)t=Math.floor(Math.random()*10+3)*40,i=Math.floor(Math.random()*9+2)*30,res.rects.push(rect(t,i,20,20));res.diam=diamond(560,360,20,20);break;case 9:res.rects.push(rect(180,260,20,20)),res.rects.push(rect(200,260,20,20)),res.rects.push(rect(220,260,20,20)),res.rects.push(rect(240,260,20,20)),res.rects.push(rect(260,260,20,20)),res.rects.push(rect(280,260,20,20)),res.rects.push(rect(300,260,20,20)),res.rects.push(rect(320,260,20,20)),res.rects.push(rect(340,260,20,20)),res.rects.push(rect(360,260,20,20)),res.snake=snakeEnemy(320,245,30,15),res.diam=diamond(560,360,20,20);break;case 10:res.rects.push(rect(120,180,20,20)),res.spikes.push(spike(120,160,20,20)),res.rects.push(rect(200,280,20,20)),res.spikes.push(spike(200,260,20,20)),res.rects.push(rect(200,100,20,20)),res.spikes.push(spike(200,80,20,20)),res.rects.push(rect(280,180,20,20)),res.spikes.push(spike(280,160,20,20)),res.rects.push(rect(360,100,20,20)),res.spikes.push(spike(360,80,20,20)),res.rects.push(rect(360,280,20,20)),res.spikes.push(spike(360,260,20,20)),res.rects.push(rect(440,180,20,20)),res.spikes.push(spike(440,160,20,20)),res.diam=diamond(560,360,20,20)}}function setFishBlocks(){var n;for(res.rectsCreated.push(rect(20,100,20,20)),res.rectsCreated.push(rect(40,100,20,20)),n=0;n<620;n+=20)res.rects.push(rect(n,0,20,20)),n>560||n<20?res.rects.push(rect(n,380,20,20)):res.spikes.push(spike(n,380,20,20));for(n=0;n<380;n+=20)res.rects.push(rect(0,n,20,20)),res.rects.push(rect(580,n,20,20));res.fish.push(fishEnemy(200,200,25,25)),res.fish[0].velocity={x:0,y:0},res.fish.push(fishEnemy(300,220,25,25)),res.fish[1].velocity={x:0,y:0},res.fish.push(fishEnemy(400,200,25,25)),res.fish[2].velocity={x:0,y:0}}function overlap(n,t){return n.x<t.x+t.w&&n.x+n.w>t.x&&n.y<t.y+t.h&&n.y+n.h>t.y}function overlapEnemy(n,t){return n.x<t.x-15+t.w&&n.x+n.w>t.x+15&&n.y<t.y+t.h&&n.y+n.h>t.y}function moveplayer(n,t,i){for(var f,u,r=0;r<res.rects.length;r++)u={x:n.x+t,y:n.y,w:n.w,h:n.h},overlap(u,res.rects[r])&&(t<0?t=res.rects[r].x+res.rects[r].w-n.x:t>0&&(t=res.rects[r].x-n.x-n.w)),res.diam!=null&&overlap(u,res.diam)&&(res.gameComplete=!0);for(r=0;r<res.rectsCreated.length;r++)u={x:n.x+t,y:n.y,w:n.w,h:n.h},overlap(u,res.rectsCreated[r])&&(t<0?t=res.rectsCreated[r].x+res.rectsCreated[r].w-n.x:t>0&&(t=res.rectsCreated[r].x-n.x-n.w));for(n.x+=t,r=0;r<res.rects.length;r++)u={x:n.x,y:n.y+i,w:n.w,h:n.h},overlap(u,res.rects[r])&&(i<0?i=res.rects[r].y+res.rects[r].h-n.y:i>0&&(i=res.rects[r].y-n.y-n.h)),res.diam!=null&&overlap(u,res.diam)&&(res.gameComplete=!0);for(r=0;r<res.rectsCreated.length;r++)u={x:n.x,y:n.y+i,w:n.w,h:n.h},overlap(u,res.rectsCreated[r])&&(i<0?i=res.rectsCreated[r].y+res.rectsCreated[r].h-n.y:i>0&&(i=res.rectsCreated[r].y-n.y-n.h)),res.diam!=null&&overlap(u,res.diam)&&(res.gameComplete=!0);for(n.y+=i,f=0;f<res.spikes.length;f++)u={x:n.x+t,y:n.y,w:n.w,h:n.h},overlap(u,res.spikes[f])&&(res.gameOver=!0);res.snake!=null&&overlap(u,res.snake)&&(res.gameOver=!0)}function moveEnemy(n,t,i){for(var u,r=0;r<res.rectsCreated.length;r++)u={x:n.x,y:n.y+i,w:n.w,h:n.h},overlap(u,res.rectsCreated[r])&&res.rectsCreated.splice(r,1);for(r=0;r<res.rects.length;r++)u={x:n.x+t,y:n.y,w:n.w,h:n.h},overlapEnemy(u,res.rects[r])&&(t<0?(t=res.rects[r].x+res.rects[r].w-n.x,res.snake.velocity.x*=-1):t>0&&(t=res.rects[r].x-n.x-n.w,res.snake.velocity.x*=-1));for(n.x+=t,r=0;r<res.rects.length;r++)u={x:n.x,y:n.y+i,w:n.w,h:n.h},overlapEnemy(u,res.rects[r])?i<0?i=res.rects[r].y+res.rects[r].h-n.y:i>0&&(i=res.rects[r].y-n.y-n.h):res.snake.velocity.x*=-1}function moveFish(n,t,i){for(var u,r=0;r<res.rectsCreated.length;r++)u={x:n.x,y:n.y+i,w:n.w,h:n.h},overlap(u,res.rectsCreated[r])&&res.rectsCreated.splice(r,1);for(r=0;r<res.rects.length;r++)u={x:n.x+t,y:n.y,w:n.w,h:n.h};for(n.x+=t,r=0;r<res.rects.length;r++)u={x:n.x,y:n.y+i,w:n.w,h:n.h};n.y+=i}function left(n,t){n.target.localName!="select"&&n.preventDefault(),res.direction.left=t}function right(n,t){n.target.localName!="select"&&n.preventDefault(),res.direction.right=t}function jump(n,t){n.target.localName!="select"&&n.preventDefault(),res.direction.up=t}function update(){var t,n;if(res.player.velocity.x=!!res.keys[68]-!!res.keys[65]!=0?3*(!!res.keys[68]-!!res.keys[65]):3*(!!res.direction.right-!!res.direction.left),res.player.velocity.y+=res.level==-1?.2:1,t=res.player.y+res.player.velocity.y,moveplayer(res.player,res.player.velocity.x,res.player.velocity.y),res.snake!=null&&moveEnemy(res.snake,res.snake.velocity.x,res.snake.velocity.y),res.player.onFloor=t>res.player.y,t!=res.player.y&&(res.player.velocity.y=0),res.player.onFloor&&(res.keys[87]||res.direction.up)&&(res.player.velocity.y=-13),res.level==-1){for(n=0;n<res.fish.length;n++)res.fish[n].velocity.x=res.player.x<res.fish[n].x-(n*6+n)?-1:1,res.fish[n].velocity.y=res.player.y<res.fish[n].y-(n*6+n)?-1:1,moveFish(res.fish[n],res.fish[n].velocity.x,res.fish[n].velocity.y);res.score++,document.getElementById("levelNum").innerHTML=res.score}}function draw(){var t=document.getElementById("screen").getContext("2d"),o,s,i,h,f,e,c,l,a,v,n,u,y,r;for(t.fillStyle=res.level==-1?"#000090":"#000",t.fillRect(0,0,t.canvas.width,t.canvas.height),res.gameOver||(res.player.velocity.x>0?res.img=document.getElementById("player_r"):res.player.velocity.x<0&&(res.img=document.getElementById("player_l")),t.drawImage(res.img,res.player.x-6,res.player.y-5)),o=document.getElementById("block"),n=0;n<res.rects.length;n++)i=res.rects[n],t.drawImage(o,i.x,i.y);for(s=document.getElementById("created"),n=0;n<res.rectsCreated.length;n++)i=res.rectsCreated[n],t.drawImage(s,i.x,i.y);for(r=document.getElementById("diamond"),res.diam!=null&&t.drawImage(r,res.diam.x,res.diam.y),h=document.getElementById("spike"),f=0;f<res.spikes.length;f++)e=res.spikes[f],t.drawImage(h,e.x,e.y);if(c=document.getElementById("snake_l"),l=document.getElementById("snake_r"),res.snake!=null&&(res.snake.velocity.x>0?t.drawImage(l,res.snake.x,res.snake.y):t.drawImage(c,res.snake.x,res.snake.y)),a=document.getElementById("fish_l"),v=document.getElementById("fish_r"),res.fish.length>0)for(n=0;n<res.fish.length;n++)res.fish[n].velocity.x>0?t.drawImage(v,res.fish[n].x,res.fish[n].y):t.drawImage(a,res.fish[n].x,res.fish[n].y);res.gameComplete&&(res.level==res.GAME_END?(u=document.getElementById("complete"),t.drawImage(u,100,60)):(u=document.getElementById("next_level"),t.drawImage(u,100,60),res.level++,setTimeout(nextLevel,1500))),res.gameOver&&(y=res.level!=-1?document.getElementById("gameOver"):document.getElementById("gameOverFish"),t.drawImage(y,100,60),r=document.getElementById("player_dead"),t.drawImage(r,res.player.x-6,res.player.y-5))}function nextLevel(){res.rects=[],res.fish=[],res.rectsCreated=[],res.spikes=[],res.snake=null,startGame(),document.getElementById("scoreLevel").innerHTML="level: ",document.getElementById("reset").disabled=!1,document.getElementById("reset").style.display="inline"}function fishLevel(){res.rects=[],res.fish=[],res.rectsCreated=[],res.spikes=[],res.snake=null,res.diam=null,res.level=-1,startFishGame(),document.getElementById("scoreLevel").innerHTML="score: ",document.getElementById("reset").disabled=!0,document.getElementById("reset").style.display="none"}function resetLevel(){res.rectsCreated=[],res.gameComplete=!1,res.gameOver=!1,res.player=rect(20,20,26,34),res.player.velocity={x:0,y:0},res.player.onFloor=!1,res.blockCount=res.INITIAL_BLOCKS,document.getElementById("blockNum").innerText=res.blockCount}var res={};$(function(){res.gameComplete=!1,res.gameOver=!1,res.rects=[],res.spikes=[],res.rectsCreated=[],res.GAME_END=10,res.INITIAL_BLOCKS=10,res.diam=null,res.snake=null,res.fish=[],res.player,res.level,res.blockCount,res.score=0,res.keys={},document.onkeydown=function(n){res.keys[n.which]=!0},document.onkeyup=function(n){res.keys[n.which]=!1},res.direction={right:!1,left:!1,up:!1},res.img=document.getElementById("player_r")}),window.onload=function(){res.level=1,setInterval(function(){res.gameComplete==!1&&res.gameOver==!1&&(update(),draw())},1e3/60),setClickEvent(),startGame()};
//@ sourceMappingURL=game.min.js.map